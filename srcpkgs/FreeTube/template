# Template file for 'FreeTube'

pkgname=FreeTube
version=0.19.2
revision=1
short_desc='Open source desktop YouTube player built with privacy in mind'
license='AGPL-3.0-or-later'
depends='electron24'
hostmakedepends='yarn'
maintainer="budrz55 <budroz135@tutanota.com>"
homepage=https://freetubeapp.io
distfiles="https://github.com/FreeTubeApp/FreeTube/archive/v$version-beta.tar.gz"
checksum="21c4c05eb1e2e8a95d7d1b94a150a6535616c82a17a6f0ad60a974ec03e3c3b0"

do_build() {
	yarn --cache-folder "yarn-cache" install
	yarn --cache-folder "yarn-cache" run build
}

do_install() {
	vlicense LICENSE
	vmkdir usr/lib/${pkgname}
	vcopy build/linux-unpacked/resources/app.asar usr/lib/$pkgname
	vbin ${FILESDIR}/freetube.sh $pkgname
	vinstall ./_icons/icon.svg 644 usr/share/pixmaps/$pkgname.svg
	vinstall ${FILESDIR}/freetube.desktop 644 usr/share/applications/$pkgname.desktop
}
