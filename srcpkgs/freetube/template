# Template file for 'freetube'

pkgname=freetube
_pkgname=FreeTube
version=0.19.2
revision=1
archs="x86_64"
short_desc='Open source desktop YouTube player built with privacy in mind'
license='AGPL-3.0-or-later'
hostmakedepends="gcc"
depends='electron24'
makedepends='yarn'
maintainer="budrz55 <budroz135@tutanota.com>"
homepage=https://freetubeapp.io
distfiles=(https://github.com/FreeTubeApp/FreeTube/archive/v$version-beta.tar.gz
				freetube.desktop
				freetube.sh)
checksum=(21c4c05eb1e2e8a95d7d1b94a150a6535616c82a17a6f0ad60a974ec03e3c3b0
						ada2b4b8f6a1e8896acbce4f4d311228d2c86026c273ffa00afa3247294f8b1e
			3f4951c6cdb33cc1c4df05606760197efe45321519c259e47656077d6df2af18)

do_build() {
	yarn --cache-folder "yarn-cache" install
	yarn --cache-folder "yarn-cache" run build
}

do_install() {
	vlicense LICENSE
	install -d "${DESTDIR}"/usr/lib/${pkgname}
	cp -R "build/linux-unpacked/resources/app.asar" "${DESTDIR}/usr/lib/$pkgname"
	install -Dm755 "${FILESDIR}/freetube.sh" "${DESTDIR}/usr/bin/$pkgname"
	install -Dm644 "./_icons/icon.svg" "${DESTDIR}/usr/share/pixmaps/$pkgname.svg"
	cd ..
	install -Dm644 "${FILESDIR}/freetube.desktop" "${DESTDIR}/usr/share/applications/$pkgname.desktop"
}
